
#import "countly/Countly.h"
#import "Preferences.h"
#import "Common.h"

%group ZephyrAnalytics

%hook SBUIController

- (void)finishLaunching {
    %orig;

    CountlyStartWithTokenHost(CountlySharedInstance, @CountlyQuote(CountlyAppToken), @"http://analytics.chpwn.com");

    NSDictionary *preferences = ZephyrPreferences() ?: [NSDictionary dictionary];
    CountlyRecordEventSegmentationCount(@"preferences", preferences, 1);
}

%end

%end

%ctor {
    %init(ZephyrAnalytics);
}

